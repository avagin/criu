language: c
sudo: required
dist: trusty
env:
 matrix:
  - TTT=linux    TR_ARCH=local KGIT="git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git"
  - TTT=net-next TR_ARCH=local KGIT="git://git.kernel.org/pub/scm/linux/kernel/git/davem/net-next.git"
  - TTT=userns-t TR_ARCH=local KGIT="git://git.kernel.org/pub/scm/linux/kernel/git/ebiederm/user-namespace.git -b for-testing"
  - TTT=userns-n TR_ARCH=local KGIT="git://git.kernel.org/pub/scm/linux/kernel/git/ebiederm/user-namespace.git -b for-next"
 global:
  - secure: "pH5j+FHqZbV6WLjRtjPVa1HuWrbJCmp0h231qdziiYl0yKL3Rr/Ueg0JHrq3OuT3VJt5tM93CcyHjW44U5T+s838w2NtfunuEAIJfSvTlxOuW++2h5EyZz1NLwocHAUlWCRt5sOCaehn2isQoegCkpYsyXyA3gxSJUAaUqYSlw0="
script:
  - sudo apt-get update
  - sudo apt-get install -qq --no-install-recommends protobuf-c-compiler libprotobuf-c0-dev libaio-dev libprotobuf-dev protobuf-compiler python-ipaddr libcap-dev libnl-3-dev gcc-multilib libc6-dev-i386 gdb bash python-protobuf libnet-dev util-linux asciidoc xmlto libnl-route-3-dev kexec-tools libssl-dev libelf-dev strace ccache
  - sudo make -C scripts/travis $TR_ARCH
after_success:
  - ccache -s
  - make -C scripts/travis after_success
group: deprecated-2017Q2
after_failure:
  - sudo make -C scripts/travis after_failure
