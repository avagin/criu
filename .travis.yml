language: c
sudo: required
dist: trusty
services:
  - docker
env:
 matrix:
  - TR_ARCH=local       GCOV=1
  - TR_ARCH=local       CLANG=1
  - TR_ARCH=x86_64
  - TR_ARCH=armv7hf
  - TR_ARCH=aarch64
  - TR_ARCH=ppc64le
  - TR_ARCH=alpine
  - TR_ARCH=armv7hf     CLANG=1
  - TR_ARCH=aarch64     CLANG=1
  - TR_ARCH=ppc64le     CLANG=1
  - TR_ARCH=alpine      CLANG=1
 global:
  - secure: "cRs4mf2aRj5VNpdrk4/mHc4Sgi7GQTxmA8pukI1G+SxXaR9kWGstkM/oKsy4L5jwab+bf0dLOAOHlENPZw6PXTfIdRx513CfA9DxfhrzfCygmUwIolG73So+eOp8Y8UNTms033zxt6/PYNcwU9nXvwY4uTAqTzPOx6ndUwkv244="
  - secure: "DxEf5Q1L/yvuI/yqC1Lg8rCDlxmhdbTnYWaiySIgekcOGyC7G5k6rrN8tbrH1T6ymQ4OBcgm7viYet1/XDTtx0kIf2CB4F5hgX/YFEAxmpfvWHKYg/oZUnSuN/L2dn6zEi92GpHbvJWJMQA20CK4+WwNm4dx7eLAXx3IiH3VpXw="
  - secure: "Vhp7e3O0dw7QqdqDnLM5kefvpWdasWeWz0IijpAey8E0eMroHtOJBfMr2kz2UWyVWYWt+sBCOrjW327BxSrDftHnl2LMgL/sz4d9zBlxoewa5rQ/o8+xCcWfI69VCAUhzhB6PhJ5dk+40MOHIXLyZf/FvMHWkMIiz9WlY+4oSMTGGeE3LPt3/tO/M2LDyZUslJJfKzzZUSj1oze4FKNCxJ7BHj7Byf++RWtrH5sxCxLcn8xI6xh/Kxlmwk1CpJ5qXXipG6Tia3ZLhXWbo5dGJ7a4r0dbOWIl91VeeKdpyzQOJTlN8t9bI5CFSIYbb3Qfkdr7FbzlnDZicmoBBm93jQxxN8rw4A/3sgniFXKlwrxfG7/xL8Ha3ggWWGuCSt0BgkyT1DbD8z54WBdqwaQR0ZHUf4+JlvA3DHMu1bwG53ZLkIAfrWDkCJhOY2bkmG2esoO0SLRRCJToAPP67ARtjKR6E96fzVzmUhnlPGwC8gZTfDvFLMddo020F4JFA7SBiKV4kwFszeOqzQxc+JOFwUz5maquNmk9QWCZSCc8XTIodfRWtlpJ8Ru2XWnO3+qmWu6L5GHYXL7wAgGdsVgO1ftHwkwu+Gt+dZzWMYnN3sBX8gDL/kSzRgrHhBHvWS7kCmX9ZGfWJPhS5CcGmWfS/KXnP9W7oEylxyQ/xYvXrlg="
script:
  - sudo make -C scripts/travis $TR_ARCH
after_success:
  - make -C scripts/travis after_success
after_failure:
  - sudo make -C scripts/travis after_failure
